name: on-main
concurrency:
  group: ${{ github.workflow }}

on:
  push:
    branches: [main]

jobs:
  terraform-plan:
    name: Terraform Plan
    runs-on: ubuntu-latest
    environment: ${{ matrix.environments}}
    strategy:
      matrix:
        environments: [dev, test]
        regions: [us-east-1, us-west-2]
      fail-fast: true
      max-parallel: 2
    steps:
      - uses: actions/checkout@v4

      - run: |
          echo "Environment: ${{ matrix.environments }}"
          echo "Region: ${{ matrix.regions }}"
